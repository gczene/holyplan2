/*global describe, it */
/*jslint node: true, nomen: true */

'use strict';

var assert = require('assert'),
    tplshare = require('../lib/tplshare.js');

describe('tplshare', function () {

    it('should set basepath', function () {
        tplshare.setPath(__dirname);
        assert.equal(__dirname, tplshare.basepath);
    });

    it('should set extension', function () {
        tplshare.setExtension('html');
        assert.equal('.html', tplshare.extension);
    });

    it('should unset extension', function () {

        // parameter : undefined
        tplshare.setExtension('html').setExtension();
        assert.equal('', tplshare.extension);

        // parameter : false
        tplshare.setExtension('html').setExtension(false);
        assert.equal('', tplshare.extension);

        // parameter : null
        tplshare.setExtension('html').setExtension(null);
        assert.equal('', tplshare.extension);

        // parameter : empty string
        tplshare.setExtension('html').setExtension('');
        assert.equal('', tplshare.extension);
    });

    it('should read all the given files', function (done) {
        tplshare.setExtension('html').get({
            '1th': 'file1', // contains : "1th content"
            '2th': 'file2'  // contains : "2th content"
        }, function (err, templates) {

            assert.equal(null, err);

            assert.deepEqual([
                { id: '1th', content: '1th content' },
                { id: '2th', content: '2th content' }
            ], templates);

            done();
        });
    });
});
